{% extends "admin/change_form.html" %}
{% load myschool_template_tags %}

{% block content %}
  {{ block.super }}
<script>
    async function loadClassSection(val) {
        const sections = document.querySelector("#id_sections");
        const url =  `{% network 'getsections' %}/?class_id=${val.target.value}`;
        await fetch(url)
        .then(response=>response.text())
        .then(data => {
            sections.innerHTML = data;
        } );
    }

    document.querySelector("#id_classes").addEventListener('change', loadClassSection )
</script>
{% endblock content %}
